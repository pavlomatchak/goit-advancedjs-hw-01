{"version":3,"file":"commonHelpers3.js","sources":["../src/js/03-feedback.js"],"sourcesContent":["import throttle from 'lodash.throttle';\n\nconst fields = Array.from(document.querySelectorAll('.feedback-form .field'));\nconst storageKey = 'feedback-form-state';\nconst onloadValue = localStorage.getItem(storageKey);\n\nconst updateValue = throttle((key, value) => {\n  const obj = JSON.parse(localStorage.getItem(storageKey)) || { email: '', message: '' };\n  obj[key] = value;\n  localStorage.setItem(storageKey, JSON.stringify(obj));\n}, 1000);\n\nfields.forEach(field => {\n  field.addEventListener('input', event => updateValue(event.target.name, event.target.value));\n\n  if (onloadValue && JSON.parse(onloadValue)[field.name]) {\n    field.value = JSON.parse(onloadValue)[field.name];\n  }\n});\n\ndocument.querySelector('.feedback-form')?.addEventListener('submit', e => {\n  e.preventDefault();\n  fields.forEach(field => {\n    field.value = '';\n  });\n  console.log(JSON.parse(localStorage.getItem(storageKey)));\n  localStorage.removeItem(storageKey);\n});\n"],"names":["fields","storageKey","onloadValue","updateValue","throttle","key","value","obj","field","event","_a"],"mappings":"wIAEA,MAAMA,EAAS,MAAM,KAAK,SAAS,iBAAiB,uBAAuB,CAAC,EACtEC,EAAa,sBACbC,EAAc,aAAa,QAAQD,CAAU,EAE7CE,EAAcC,EAAS,CAACC,EAAKC,IAAU,CAC3C,MAAMC,EAAM,KAAK,MAAM,aAAa,QAAQN,CAAU,CAAC,GAAK,CAAE,MAAO,GAAI,QAAS,EAAE,EACpFM,EAAIF,CAAG,EAAIC,EACX,aAAa,QAAQL,EAAY,KAAK,UAAUM,CAAG,CAAC,CACtD,EAAG,GAAI,EAEPP,EAAO,QAAQQ,GAAS,CACtBA,EAAM,iBAAiB,QAASC,GAASN,EAAYM,EAAM,OAAO,KAAMA,EAAM,OAAO,KAAK,CAAC,EAEvFP,GAAe,KAAK,MAAMA,CAAW,EAAEM,EAAM,IAAI,IACnDA,EAAM,MAAQ,KAAK,MAAMN,CAAW,EAAEM,EAAM,IAAI,EAEpD,CAAC,SAEDE,EAAA,SAAS,cAAc,gBAAgB,IAAvC,MAAAA,EAA0C,iBAAiB,SAAU,GAAK,CACxE,EAAE,eAAc,EAChBV,EAAO,QAAQQ,GAAS,CACtBA,EAAM,MAAQ,EAClB,CAAG,EACD,QAAQ,IAAI,KAAK,MAAM,aAAa,QAAQP,CAAU,CAAC,CAAC,EACxD,aAAa,WAAWA,CAAU,CACpC"}